<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>cudawarped - Accelerate OpenCV on Windows with CUDA and Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./imgs/cropped-cuda_thread_blocks.webp" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta property="og:title" content="cudawarped - Accelerate OpenCV on Windows with CUDA and Python">
<meta property="og:description" content="">
<meta property="og:image" content="https://cudawarped.github.io/opencv-experiments/imgs/opencv_cuda_intel.webp">
<meta property="og:site-name" content="cudawarped">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./imgs\profile_1-e1674474909304.webp" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">cudawarped</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./tutorials.html" rel="" target="" aria-current="page">
 <span class="menu-text">OpenCV</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./accelerate_opencv_cuda_python.html">Accelerate OpenCV on Windows with CUDA and Python bindings</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OpenCV Guides</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./accelerate_opencv_cuda_python.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Accelerate OpenCV on Windows with CUDA and Python bindings</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nbs/opencv4-cuda-streams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accelerating OpenCV with CUDA streams in Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./opencv_cuda_performance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OpenCV CUDA Performance Comparisson</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-manually-build-opencv" id="toc-why-manually-build-opencv" class="nav-link active" data-scroll-target="#why-manually-build-opencv">Why manually build OpenCV?</a></li>
  <li><a href="#pre-build-checklist" id="toc-pre-build-checklist" class="nav-link" data-scroll-target="#pre-build-checklist">Pre-build checklist</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#building-opencv-with-cmake" id="toc-building-opencv-with-cmake" class="nav-link" data-scroll-target="#building-opencv-with-cmake">Building OpenCV with CMake</a>
  <ul class="collapse">
  <li><a href="#building-opencv-with-cuda-using-visual-studio-solution-files-from-the-command-prompt-cmd" id="toc-building-opencv-with-cuda-using-visual-studio-solution-files-from-the-command-prompt-cmd" class="nav-link" data-scroll-target="#building-opencv-with-cuda-using-visual-studio-solution-files-from-the-command-prompt-cmd">Building OpenCV with CUDA using Visual Studio solution files from the command prompt (cmd)</a></li>
  <li><a href="#decreasing-the-build-time-with-ninja" id="toc-decreasing-the-build-time-with-ninja" class="nav-link" data-scroll-target="#decreasing-the-build-time-with-ninja">Decreasing the build time with Ninja</a></li>
  </ul></li>
  <li><a href="#verifying-opencv-is-cuda-accelerated" id="toc-verifying-opencv-is-cuda-accelerated" class="nav-link" data-scroll-target="#verifying-opencv-is-cuda-accelerated">Verifying OpenCV is CUDA accelerated</a></li>
  <li><a href="#python-bindings" id="toc-python-bindings" class="nav-link" data-scroll-target="#python-bindings">Python bindings</a>
  <ul class="collapse">
  <li><a href="#generate-python-bindings-for-a-debug-build" id="toc-generate-python-bindings-for-a-debug-build" class="nav-link" data-scroll-target="#generate-python-bindings-for-a-debug-build">Generate Python bindings for a Debug Build</a></li>
  <li><a href="#troubleshooting-python-bindings-installation-issues" id="toc-troubleshooting-python-bindings-installation-issues" class="nav-link" data-scroll-target="#troubleshooting-python-bindings-installation-issues">Troubleshooting Python Bindings Installation issues</a></li>
  <li><a href="#manually-installing-opencv-python-bindings" id="toc-manually-installing-opencv-python-bindings" class="nav-link" data-scroll-target="#manually-installing-opencv-python-bindings">Manually installing OpenCV Python bindings</a></li>
  </ul></li>
  <li><a href="#choosing-the-a-suitable-cuda-compute-capability" id="toc-choosing-the-a-suitable-cuda-compute-capability" class="nav-link" data-scroll-target="#choosing-the-a-suitable-cuda-compute-capability">Choosing the a suitable CUDA compute capability</a>
  <ul class="collapse">
  <li><a href="#tips" id="toc-tips" class="nav-link" data-scroll-target="#tips">Tips</a>
  <ul class="collapse">
  <li><a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting">Troubleshooting</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Accelerate OpenCV on Windows with CUDA and Python</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="imgs/opencv_cuda_intel.webp" class="img-fluid figure-img"></p>
</figure>
</div>
<section id="why-manually-build-opencv" class="level1">
<h1>Why manually build OpenCV?</h1>
<p>Because the pre-built <a href="https://github.com/opencv/opencv/releases">Windows libraries</a> available for <a href="https://opencv.org/releases">OpenCV</a> do not include the <a href="https://docs.opencv.org/4.x/d1/d1e/group__cuda.html">CUDA modules</a>, or support for the Nvidia <a href="https://developer.nvidia.com/nvidia-video-codec-sdk">Video Codec SDK</a> or <a href="https://developer.nvidia.com/cudnn">cuDNN</a>, I have included the build instructions in the guide below for anyone who is interested. The guide includes instructions for compiling the 64 bit version of the OpenCV shared libraries with Visual Studio, <a href="https://developer.nvidia.com/cuda-toolkit/whatsnew">CUDA</a> (optionally the <a href="https://developer.nvidia.com/nvidia-video-codec-sdk">Nvidia Video Codec SDK</a> and <a href="https://developer.nvidia.com/cudnn">cuDNN</a>), and bindings for accessing the OpenCV CUDA modules from within Python.</p>
<p>If you just need the Windows libraries or a Python Wheel you may not need to look any futher as I may have provided a pre-buit version which is suitable for your setup. Take a look at <a href="https://github.com/cudawarped/opencv_contrib/releases">OpenCV C++ CUDA Builds</a> and/or <a href="https://github.com/cudawarped/opencv-python-cuda-wheels/releases">OpenCV python CUDA wheels</a> to see if this is the case.</p>
<p>To see if building the OpenCV CUDA modules is suitable for your application you can get an indication of the performance boost of most functions in <a href="./opencv_cuda_performance.html">OpenCV CUDA Performance Comparisson (Nvidia vs Intel)</a>.</p>
</section>
<section id="pre-build-checklist" class="level1">
<h1>Pre-build checklist</h1>
<p><strong>Before continuing there are a few things to be aware of:</strong></p>
<ol type="1">
<li><p>This guide assumes you are building the latest stable release of OpenCV against the most recent CUDA dependencies. Whilst the instructions can also work on older versions, this is not guaranteed so please update to the latest stable releases before raising any issues.</p></li>
<li><p>If you just need the OpenCV binaries or a Python Wheel which includes the CUDA modules, check <a href="https://github.com/cudawarped/opencv_contrib/releases" target="_blank" rel="noopener noreferrer">OpenCV C++ CUDA Builds</a> and/or <a href="https://github.com/cudawarped/opencv-python-cuda-wheels/releases">OpenCV python CUDA wheels</a> first to see if they are available for your desired combination of OpenCV and CUDA.</p></li>
<li><p>If you have previously built and/or are trying to manually install the Python bindings and are facing errors check out the <a href="#troubleshooting-python-bindings-installation-issues">troubleshooting Python bindings installation issues</a> and <a href="#manually-installing-opencv-python-bindings">manually installing OpenCV Python bindings</a> sections first.</p></li>
<li><p>If you already have the OpenCV source and the required dependencies and are just looking for the CMake flags they can be found <a href="#opencv-cuda-python-windows-cmake-flags">here</a>.</p></li>
</ol>
</section>
<section id="prerequisites" class="level1 page-columns page-full">
<h1>Prerequisites</h1>
<p>There are a couple of components you need to download and/or install before you can get started, you first need to:</p>
<ol type="1">
<li><p>Install the latest version of <a href="https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community" target="_blank" rel="noopener noreferrer">Visual Studio</a>, selecting the <strong>Desktop development with C++</strong> workload shown in the image below. If you already have an installation ensure that the correct workload is installed and that you have updated to the latest version.</p>
<img src="imgs/vs_community_c++_workload.png" class="img-fluid" data-fig-align="center" alt="Visual Studio Select C++ Workload"></li>
</ol>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">I have seen lots of guides including instructions to download and use git to get the source files, however this is a completely unnecessary step. If you are a developer and you don’t already have git installed and configured then I would assume there is a good reason for this and I would not advise installing it just to build OpenCV.</span></div></div>
<ol start="2" type="1">
<li><p>Download the source files for OpenCV from <a href="https://github.com/opencv">GitHub</a> by either cloning the repositories (<a href="https://github.com/opencv/opencv">opencv</a> and <a href="https://github.com/opencv/opencv_contrib">opencv_contrib</a>) or or downloading the archives containing the source files (<a href="https://github.com/opencv/opencv/archive/refs/heads/4.x.zip">opencv.zip</a> and <a href="https://github.com/opencv/opencv_contrib/archive/refs/heads/4.x.zip">opencv_contirib.zip</a>)</p></li>
<li><p>Install the latest stable (not release candidate -rc) version of <a href="https://cmake.org/download/" target="_blank" rel="noopener noreferrer">CMake</a>.</p></li>
<li><p>Install the latest version of the <a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="noopener noreferrer">CUDA Toolkit</a>.</p></li>
</ol>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>If your system path is too long, CUDA will not add the path to its shared libraries <code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\vxx.x\bin</code> during installation. If you receive a warning about this at the end of the installation process do not forget to manually add the this to your system or user path.</p>
</div>
</div>
</div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">Before building you may want to ensure that your GPU has decoding support by refering to <a href="https://developer.nvidia.com/video-encode-decode-gpu-support-matrix#Decoder" rel="noopener noreferrer" target="_blank">Nvidia Video Decoder Support Matrix</a></span></div></div>
<ol start="5" type="1">
<li><strong>Optional</strong> - To <strong>decode</strong> video on the GPU with the <a href="https://developer.nvidia.com/nvidia-video-codec-sdk" target="_blank" rel="noopener noreferrer">Nvidia Video Codec SDK</a>:
<ol type="i">
<li>Register and <a href="https://developer.nvidia.com/nvidia-video-codec-sdk#Download" target="_blank" rel="noopener noreferrer">download</a> the latest version of the Video Codec SDK.</li>
<li>Extract and copy the contents of <strong>Interface</strong> and <strong>Lib</strong> to the <strong>include</strong> and <strong>lib</strong> directories inside your CUDA installation.</li>
</ol></li>
<li><strong>Optional</strong> - To use the DNN CUDA backend:
<ol type="i">
<li>Register and <a href="https://developer.nvidia.com/rdp/form/cudnn-download-survey" target="_blank" rel="noopener noreferrer">download</a> cuDNN.
</li>
<li>Extract and copy the <strong>bin</strong>, <strong>include</strong> and <strong>lib</strong> directories to your CUDA installation.</li>
</ol></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The installation directory for CUDA xx.x is <code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\vxx.x</code>.</p>
</div>
</div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">All python distributions should work however I recommend building and testing against a new install of this compact distribution to avoid any problems caused by existing configurations.</span></div></div>
<ol start="7" type="1">
<li><strong>Optional</strong> – To call OpenCV CUDA routines from python, install the latest x64 bit version of <a href="https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-Windows-x86_64.exe">mambaforge</a>.</li>
</ol>
</section>
<section id="building-opencv-with-cmake" class="level1 page-columns page-full">
<h1>Building OpenCV with CMake</h1>
<div class="page-columns page-full"><p> Before you can build OpenCV you have to generate the build files with CMake. This can be done via the command line or with the CMake GUI. Most new users will find the GUI more accessable however by far the quickest, easiest and least error prone way to proceed is to call CMake from the command line and as a result I have not included any instructions on using the CMake GUI in this guide.</p><div class="no-row-height column-margin column-container"><span class="">If you have any build issues with OpenCV then you will need to provide the arguments passed to CMake as well as the output from the generation step when asking for assistance so it is a good idea to avoid the CMake gui at this stage.</span></div></div>
<p>In addition there are several ways to build OpenCV using Visual Studio. For simplicity only two methods are discussed:</p>
<ol type="1">
<li><a href="#building-opencv-with-cuda-using-visual-studio-solution-files-from-the-command-prompt-cmd">Building OpenCV with Visual Studio solution files</a>.</li>
<li><a href="#decreasing-the-build-time-with-ninja">Building OpenCV with the ninja build system to reduce the build time</a>.</li>
</ol>
<section id="building-opencv-with-cuda-using-visual-studio-solution-files-from-the-command-prompt-cmd" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="building-opencv-with-cuda-using-visual-studio-solution-files-from-the-command-prompt-cmd">Building OpenCV with CUDA using Visual Studio solution files from the command prompt (cmd)</h2>
<p>The following steps will build the <code>opencv_worldxxx.dll</code> using NVIDIA’s recommended settings for future hardware compatibility. This does however have two drawbacks, first the build can take several hours to complete and second, the shared library can be over 1GB depending on the configuration that you choose. To find out how to reduce both the compilation time and size of <code>opencv_worldxxx.dll</code> read <a href="#choosing-the-cuda-compute-capability">choosing a suitable CUDA compute capability</a> first and then continue as below. Additionally to reduce the build time futher you can use the Ninja build system, see <a href="#decreasing-the-build-time-with-ninja">building OpenCV with the ninja build system to reduce the build time</a></p>
<ol type="1">
<li><p>Open windows command prompt, type <strong>cmd</strong> in the search bar.</p></li>
<li><p>Paste the below into to the command prompt and press <strong>Enter</strong>.</p>
<p></p>
<p></p>
<p></p>
<div class="sourceCode" id="opencv-cuda-python-windows-cmake-flags"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="opencv-cuda-python-windows-cmake-flags-1"><a href="#opencv-cuda-python-windows-cmake-flags-1" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\CMake\bin\cmake.exe" -B"PATH_TO_BUILD_DIR" -H"PATH_TO_OPENCV_SOURCE" -DOPENCV_EXTRA_MODULES_PATH="PATH_TO_OPENCV_CONTRIB_MODULES" -G"Visual Studio 17 2022" -DINSTALL_TESTS=ON -DINSTALL_C_EXAMPLES=ON -DBUILD_EXAMPLES=ON -DBUILD_opencv_world=ON -DWITH_CUDA=ON -DWITH_CUBLAS=ON -DWITH_CUFFT=ON -DCUDA_ARCH_PTX=9.0 -DBUILD_opencv_python3=ON -DPYTHON3_INCLUDE_DIR=PATH_TO_PYTHON_DIST/include -DPYTHON3_LIBRARY=PATH_TO_PYTHON_DIST/libs/python%pyVer%.lib -DPYTHON3_EXECUTABLE=PATH_TO_PYTHON_DIST/python.exe -DPYTHON3_NUMPY_INCLUDE_DIRS=PATH_TO_PYTHON_DIST/lib/site-packages/numpy/core/include -DPYTHON3_PACKAGES_PATH=PATH_TO_PYTHON_DIST/Lib/site-packages/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where</p>
<ol type="i">
<li><strong>PATH_TO_OPENCV_SOURCE</strong> is the root of the OpenCV files you downloaded or cloned (the directory containing 3rdparty, apps, build, etc.),</li>
<li><strong>PATH_TO_OPENCV_CONTRIB_MODULES</strong> is the path to the <strong>modules</strong> directory inside the <a href="https://github.com/opencv/opencv_contrib/tree/master/modules" target="_blank" rel="noopener noreferrer">opencv-contrib</a> repository (the directory containing cudaarithm, cudabgsegm, etc.),</li>
<li><strong>PATH_TO_BUILD_DIR</strong> is the path to the directory where the build files should go and</li>
<li><strong>PATH_TO_PYTHON_DIST</strong> is the directory where miniconda was installed and,</li>
<li><strong>PYTHON_VERSION</strong> is the concatination of the major and minor version of your python install, e.g.&nbsp;for Python 3.10.10 <strong>PYTHON_VERSION</strong>==310.</li>
</ol>
<p>This will build OpenCV and its python bindings with CUDA acceleration including all the corresponding tests and examples for verifcation. Additionally if the Nvidia Video Codec SDK or cuDNN are installed the corresponding modules will automatically be included.</p>
<p>Expand the tip below for an example of the output you should get in CMake if the configuration step is successful.</p></li>
</ol>
<div class="no-row-height column-margin column-container"><span class="">An additionaly option you may want to include is <code>-DCUDA_FAST_MATH=ON</code> which compiles the CUDA kernels with the <a href="https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html?highlight=use_fast_math#intrinsic-functions">-use_fast_math</a> option. This will however cause some of the accuracy and performace tests to fail as the floating point results will be slightly less accurate.</span><span class="">To get the python version open the <strong>MiniForge Prompt</strong> from the start menu and type <code>Python -V</code></span><span class="">If you get the following error “CUDA : OpenCV requires enabled ‘cudev’ module from ‘opencv_contrib’” when configuring the build with CMake you have not set <code>OPENCV_EXTRA_MODULES_PATH</code> correctly, most likely you have set it to the root of the <code>opencv_contrib</code> repo and not the modules directory inside the repo.</span></div><div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example of CMake Configuration Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb1"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>-- General configuration for OpenCV 4.7.0-dev =====================================</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>--   Version control:               4.7.0-252-g88a438e542</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>--   Extra modules:</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>--     Location (extra):            D:/repos/opencv/contrib/modules</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>--     Version control (extra):     4.7.0-42-ga42b8bef</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>--   Platform:</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>--     Timestamp:                   2023-05-03T10:21:52Z</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>--     Host:                        Windows 10.0.22621 AMD64</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>--     CMake:                       3.25.1</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>--     CMake generator:             Visual Studio 17 2022</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>--     CMake build tool:            C:/Program Files/Microsoft Visual Studio/2022/Community/MSBuild/Current/Bin/amd64/MSBuild.exe</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>--     MSVC:                        1934</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>--     Configuration:               Debug Release</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>--   CPU/HW features:</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>--     Baseline:                    SSE SSE2 SSE3</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>--       requested:                 SSE3</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>--     Dispatched code generation:  SSE4_1 SSE4_2 FP16 AVX AVX2 AVX512_SKX</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>--       requested:                 SSE4_1 SSE4_2 AVX FP16 AVX2 AVX512_SKX</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>--       SSE4_1 (18 files):         + SSSE3 SSE4_1</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>--       SSE4_2 (2 files):          + SSSE3 SSE4_1 POPCNT SSE4_2</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>--       FP16 (1 files):            + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 AVX</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>--       AVX (8 files):             + SSSE3 SSE4_1 POPCNT SSE4_2 AVX</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>--       AVX2 (36 files):           + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 FMA3 AVX AVX2</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>--       AVX512_SKX (8 files):      + SSSE3 SSE4_1 POPCNT SSE4_2 FP16 FMA3 AVX AVX2 AVX_512F AVX512_COMMON AVX512_SKX</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>--   C/C++:</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>--     Built as dynamic libs?:      YES</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>--     C++ standard:                11</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>--     C++ Compiler:                C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.34.31933/bin/Hostx64/x64/cl.exe  (ver 19.34.31937.0)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>--     C++ flags (Release):         /DWIN32 /D_WINDOWS /W4 /GR  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /fp:precise     /EHa /wd4127 /wd4251 /wd4324 /wd4275 /wd4512 /wd4589 /wd4819 /MP  /MD /O2 /Ob2 /DNDEBUG</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>--     C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4 /GR  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /fp:precise     /EHa /wd4127 /wd4251 /wd4324 /wd4275 /wd4512 /wd4589 /wd4819 /MP  /MDd /Zi /Ob0 /Od /RTC1</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>--     C Compiler:                  C:/Program Files/Microsoft Visual Studio/2022/Community/VC/Tools/MSVC/14.34.31933/bin/Hostx64/x64/cl.exe</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>--     C flags (Release):           /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /fp:precise     /MP   /MD /O2 /Ob2 /DNDEBUG</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>--     C flags (Debug):             /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /fp:precise     /MP /MDd /Zi /Ob0 /Od /RTC1</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>--     Linker flags (Release):      /machine:x64  /INCREMENTAL:NO</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>--     Linker flags (Debug):        /machine:x64  /debug /INCREMENTAL</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>--     ccache:                      NO</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>--     Precompiled headers:         NO</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>--     Extra dependencies:          cudart_static.lib nppc.lib nppial.lib nppicc.lib nppicom.lib nppidei.lib nppif.lib nppig.lib nppim.lib nppist.lib nppisu.lib nppitc.lib npps.lib cublas.lib cufft.lib -LIBPATH:C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.2/lib/x64</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>--     3rdparty dependencies:</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>--   OpenCV modules:</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>--     To be built:                 aruco barcode bgsegm bioinspired calib3d ccalib core cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev datasets dnn dnn_objdetect dnn_superres dpm face features2d flann fuzzy gapi hfs highgui img_hash imgcodecs imgproc intensity_transform line_descriptor mcc ml objdetect optflow phase_unwrapping photo plot python3 quality rapid reg rgbd saliency shape stereo stitching structured_light superres surface_matching text tracking ts video videoio videostab wechat_qrcode world xfeatures2d ximgproc xobjdetect xphoto</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>--     Disabled:                    -</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>--     Disabled by dependency:      -</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>--     Unavailable:                 alphamat cvv freetype hdf java julia matlab ovis python2 python2 sfm viz</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>--     Applications:                tests perf_tests examples apps</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>--     Documentation:               NO</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>--     Non-free algorithms:         NO</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>--   Windows RT support:            NO</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>--   GUI:</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>--     Win32 UI:                    YES</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>--     VTK support:                 NO</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>--   Media I/O:</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>--     ZLib:                        build (ver 1.2.13)</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>--     JPEG:                        build-libjpeg-turbo (ver 2.1.3-62)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>--       SIMD Support Request:      YES</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>--       SIMD Support:              NO</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>--     WEBP:                        build (ver encoder: 0x020f)</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>--     PNG:                         build (ver 1.6.37)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>--     TIFF:                        build (ver 42 - 4.2.0)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>--     JPEG 2000:                   build (ver 2.4.0)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>--     OpenEXR:                     build (ver 2.3.0)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>--     HDR:                         YES</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>--     SUNRASTER:                   YES</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>--     PXM:                         YES</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>--     PFM:                         YES</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>--   Video I/O:</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>--     DC1394:                      NO</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>--     FFMPEG:                      YES (prebuilt binaries)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>--       avcodec:                   YES (58.134.100)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>--       avformat:                  YES (58.76.100)</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>--       avutil:                    YES (56.70.100)</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>--       swscale:                   YES (5.9.100)</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>--       avresample:                YES (4.0.0)</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>--     GStreamer:                   NO</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>--     DirectShow:                  YES</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>--     Media Foundation:            YES</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>--       DXVA:                      YES</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>--   Parallel framework:            Concurrency</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>--   Trace:                         YES (with Intel ITT)</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>--   Other third-party libraries:</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>--     Intel IPP:                   2021.8 [2021.8.0]</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>--            at:                   D:/build/opencv/4_7_0/delete_this/3rdparty/ippicv/ippicv_win/icv</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>--     Intel IPP IW:                sources (2021.8.0)</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>--               at:                D:/build/opencv/4_7_0/delete_this/3rdparty/ippicv/ippicv_win/iw</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>--     Lapack:                      NO</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>--     Eigen:                       NO</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>--     Custom HAL:                  NO</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>--     Protobuf:                    build (3.19.1)</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>--     Flatbuffers:                 builtin/3rdparty (23.1.21)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>--   NVIDIA CUDA:                   YES (ver 12.1, CUFFT CUBLAS NVCUVID NVCUVENC)</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>--     NVIDIA GPU arch:</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>--     NVIDIA PTX archs:            90</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>--   cuDNN:                         NO</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>--   OpenCL:                        YES (NVD3D11)</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>--     Include path:                D:/repos/opencv/opencv/3rdparty/include/opencl/1.2</span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>--     Link libraries:              Dynamic load</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>--   Python 3:</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>--     Interpreter:                 C:/Users/username/mambaforge/python.exe (ver 3.9.16)</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>--     Libraries:                   C:/Users/username/mambaforge/libs/python39.lib (ver 3.9.16)</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>--     numpy:                       C:/Users/username/mambaforge/Lib/site-packages/numpy/core/include (ver 1.23.5)</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>--     install path:                C:/Users/username/mambaforge/Lib/site-packages/cv2/python-3.9</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>--   Python (for build):            C:/Users/username/mambaforge/python.exe</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>--   Java:</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>--     ant:                         NO</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>--     JNI:                         NO</span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>--     Java wrappers:               NO</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>--     Java tests:                  NO</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>--   Install to:                    D:/build/opencv/4_7_0/install</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>-- -----------------------------------------------------------------</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>--</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>-- Configuring done</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>-- Generating done</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>-- Build files have been written to: D:/build/opencv/4_7_0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Only build cuDNN backend
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you just want to CUDA accelerate the DNN module and are not interested in building the rest of the CUDA modules the following can be added to the above command.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>-DBUILD_opencv_cudaarithm=OFF -DBUILD_opencv_cudabgsegm=OFF -DBUILD_opencv_cudafeatures2d=OFF -DBUILD_opencv_cudafilters=OFF -DBUILD_opencv_cudaimgproc=OFF -DBUILD_opencv_cudalegacy=OFF -DBUILD_opencv_cudaobjdetect=OFF -DBUILD_opencv_cudaoptflow=OFF -DBUILD_opencv_cudastereo=OFF -DBUILD_opencv_cudawarping=OFF -DBUILD_opencv_cudacodec=OFF</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will significantly reduce compilation time and size of <code>opencv_worldxxx.dll</code>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Build without python bindings
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you don’t want to build python bindings then you can simply remove everything from <code>-DBUILD_opencv_python3</code> onwards in the above command.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Verify configuration includes Python bindings before building
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you are building the python bindings look for <strong>python3</strong> in the <strong>To be built:</strong> section of your CMake configuration output and if its not present look for any python related errors in the output preceeding it. e.g.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>--   OpenCV modules:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>--     To be built:                 aruco bgsegm bioinspired calib3d ccalib core cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev datasets dnn dnn_objdetect dpm face features2d flann fuzzy hfs highgui img_hash imgcodecs imgproc line_descriptor ml objdetect optflow phase_unwrapping photo plot python2 python3 quality reg rgbd saliency shape stereo stitching structured_light superres surface_matching text tracking ts video videoio videostab world xfeatures2d ximgproc xobjdetect xphoto</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ol start="2" type="1">
<li>The <strong>OpenCV.sln</strong> solution file should now be in your <strong>PATH_TO_BUILD_DIR</strong> directory. To build OpenCV you have two options depending on you preference you can:
<ol type="i">
<li><p>Build directly from the command line by simply entering the following (swaping <strong>Release</strong> for <strong>Debug</strong> to build a release version)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\CMake\bin\cmake.exe" --build PATH_TO_BUILD_DIR --target INSTALL --config Debug</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Build through Visual Studio GUI by opening up the <strong>OpenCV.sln</strong> in Visual Studio, selecting your Configuration, clicking on <strong>Solution Explorer</strong>, expanding <strong>MakeTargets</strong>, right clicking on <strong>INSTALL</strong> and clicking <strong>Build</strong>.</p>
<img src="imgs/cmake_visual_studio_install.webp" class="img-fluid" data-fig-align="center" alt="Visual Studio Build Solution"></li>
</ol>
Either approach will both build the library, install the Python bindings and copy the necessary redistributable parts to the install directory (<strong>PATH_TO_BUILD_DIR/build/install</strong> in this example). All that is required now to run any programs compiled against these libs is to add the directory containing opencv_worldxxx.dll to you user <strong>path</strong> environmental variable.</li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>By default you have to build <strong>Release</strong> when generating python bindings, see for instructions on how to build <strong>Debug</strong> see <a href="#generate-python-bindings-for-a-debug-build">generate python bindings for a debug build</a></p>
</div>
</div>
<p>If everything was successful, congratulations, you now have OpenCV built with CUDA. To quickly verify that the CUDA modules are working and check if there is any performance benefit on your specific hardware see <a href="#cuda_performance">below</a></p>
</section>
<section id="decreasing-the-build-time-with-ninja" class="level2">
<h2 class="anchored" data-anchor-id="decreasing-the-build-time-with-ninja">Decreasing the build time with Ninja</h2>
<p>The build time for OpenCV can be reduced by more than 2x (from 2 hours to 30 mins on an i7-8700) by utilizing the Ninja build system instead of directly generating Visual Studio solution files. The only difference you may notice is that Ninja will only produce one configuration at a time, either a <code>Debug</code> or <code>Release</code>, therefore if you don’t want to build <code>Release</code> (the default) the <code>CMAKE_BUILD_TYPE</code> has to be passed to CMake.</p>
<p>Ninja is installed by default if the <strong>Desktop development with C++</strong> workload is selected when installing Visual Studio, therefore building with Ninja only requires two extra configuration steps, expand the tip below for an example of the modified command line arguments.:</p>
<ol type="1">
<li><p>Configuring Visual Studio Development tools by entering the following into the command prompt before entering the CMake command (changing Community to either Professional or Enterprise if necessary)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Telling CMake to use <strong>Ninja</strong> instead of Visual Studio, i.e.&nbsp;replacing <code>-G"Visual Studio 17 2022"</code> with <code>-GNinja</code>.</p></li>
</ol>
<p>Once the build files have been generated the build can be kicked off in the same way as before but this time dropping the redundant <code>--config</code> argument.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\CMake\bin\cmake.exe" --build PATH_TO_BUILD_DIR --target INSTALL</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Example of the full command line for building a <code>Release</code> version of OpenCV with the Ninja build system.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\CMake\bin\cmake.exe" -B"PATH_TO_BUILD_DIR" -H"PATH_TO_OPENCV_SOURCE" -DOPENCV_EXTRA_MODULES_PATH="PATH_TO_OPENCV_CONTRIB_MODULES" -G"Ninja" -DCMAKE_BUILD_TYPE=Release -DINSTALL_TESTS=ON -DINSTALL_C_EXAMPLES=ON -DBUILD_EXAMPLES=ON -DBUILD_opencv_world=ON -DWITH_CUDA=ON -DWITH_CUBLAS=ON -DCUDA_ARCH_PTX=8.6 -DBUILD_opencv_python3=ON -DPYTHON3_INCLUDE_DIR=PATH_TO_PYTHON_DIST include -DPYTHON3_LIBRARY=PATH_TO_PYTHON_DIST/libs/python%pyVer%.lib -DPYTHON3_EXECUTABLE=PATH_TO_PYTHON_DIST/python.exe -DPYTHON3_NUMPY_INCLUDE_DIRS=PATH_TO_PYTHON_DIST/lib/site-packages/numpy/core/include -DPYTHON3_PACKAGES_PATH=PATH_TO_PYTHON_DIST/Lib/site-packages/ -DOPENCV_SKIP_PYTHON_LOADER=ON</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>"C:\Program Files\CMake\bin\cmake.exe" --build PATH_TO_BUILD_DIR --target INSTALL</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="verifying-opencv-is-cuda-accelerated" class="level1 page-columns page-full">
<h1>Verifying OpenCV is CUDA accelerated</h1>
<p>The easiest way to quickly verify that everything is working is to check that one of the inbuilt CUDA performance tests passes.</p>
<p>To run the CUDA performance test simply enter the following into the existing command prompt.</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">The GEMM test is used in this example but any of the accuracy (<code>opencv_test_cuda*.exe</code>) or performance (<code>opencv_perf_cuda*.exe</code>) tests could have been chosen.</span></div></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>"PATH_TO_BUILD_DIR\bin\opencv_test_cudaarithm.exe" --gtest_filter=CUDA_Arithm/GEMM.Accuracy/0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To verify that everything is working look for the <strong>[ PASSED ] 1 test</strong> text, at the bottom of the test output, an example of which is below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>[==========] Running 1 test from 1 test case.</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>[----------] Global test environment set-up.</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>[----------] 1 test from CUDA_Arithm/GEMM</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>[ RUN      ] CUDA_Arithm/GEMM.Accuracy/0, where GetParam() = (NVIDIA GeForce RTX 3070 Ti Laptop GPU, 128x128, 32FC1, 0, whole matrix)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>[       OK ] CUDA_Arithm/GEMM.Accuracy/0 (1038 ms)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>[----------] 1 test from CUDA_Arithm/GEMM (1039 ms total)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>[----------] Global test environment tear-down</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>[==========] 1 test from 1 test case ran. (1041 ms total)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>[  PASSED  ] 1 test.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If the test has passed then we can confirm that the OpenCV build inside <strong>PATH_TO_BUILD_DIR</strong> includes the CUDA modules.</p>
</section>
<section id="python-bindings" class="level1">
<h1>Python bindings</h1>
<p>The instructions above will enable you to build a <code>Release</code> version of OpenCV with bindings for python and automatically install them into your <code>PATH_TO_PYTHON_DIST/site-packages\cv2</code> directory. You can then import the OpenCV python module (cv2) as</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>import cv2 as cv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and you should see output similar to the below when interrogating the build information</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>print(cv.getBuildInformation())</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>General configuration for OpenCV 4.7.0-dev =====================================</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  Version control:               4.7.0-251-ge3e1f704a4-dirty</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  Extra modules:</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    Location (extra):            D:/repos/opencv/contrib/modules</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    Version control (extra):     4.7.0-38-g960b3f68</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  Platform:</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    Timestamp:                   2023-03-21T15:46:23Z</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    Host:                        Windows 10.0.22621 AMD64</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    CMake:                       3.25.1</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    CMake generator:             Ninja</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    CMake build tool:            D:/bin/ninja/ninja.exe</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    MSVC:                        1934</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    Configuration:               Release</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>That said you may:</p>
<ol type="1">
<li>Want to build bindings for a <code>Debug</code> as well or instead of a <code>Release</code> build.</li>
<li>Encounter errors when trying to import the <code>cv2</code> module in python.</li>
</ol>
<p>Both of these scenarios are covered in the next three sections.</p>
<section id="generate-python-bindings-for-a-debug-build" class="level2">
<h2 class="anchored" data-anchor-id="generate-python-bindings-for-a-debug-build">Generate Python bindings for a Debug Build</h2>
<p>Python bindings cannot by default be generated for a <code>Debug</code> configuration, that is unless you have specificaly built or downloaded a debug version of python. That said you can easily generate a <code>Debug</code> build by modifying the contents of <code>PATH_TO_PYTHON_DIST/include/pyconfig.h</code>, changing</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode default code-overflow-wrap code-with-copy"><code class="sourceCode default"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>pragma comment(lib,"pythonxx_d.lib")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode cpp code-overflow-wrap code-with-copy"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>pragma comment<span class="op">(</span>lib<span class="op">,</span><span class="st">"pythonxx.lib"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode cpp code-overflow-wrap code-with-copy"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#       define Py_DEBUG</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp code-overflow-wrap code-with-copy"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">//#       define Py_DEBUG</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="troubleshooting-python-bindings-installation-issues" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-python-bindings-installation-issues">Troubleshooting Python Bindings Installation issues</h2>
<p>If you are unable to <code>import cv2</code> without errors then check below to see</p>
<ol type="1">
<li><blockquote class="blockquote">
<p>ModuleNotFoundError: No module named ‘cv2’</p>
</blockquote>
<p>The installation of the python bindings has failed, check</p>
<ol type="i">
<li>the build was successful, and</li>
<li><code>-DPYTHON3_PACKAGES_PATH=PATH_TO_PYTHON_DIST/Lib/site-packages/</code> was set correctly, and</li>
<li>if you are still seeing the above error try installing the bindings manually following</li>
</ol></li>
<li><blockquote class="blockquote">
<p>ImportError: ERROR: recursion is detected during loading of “cv2” binary extensions. Check OpenCV installation.</p>
</blockquote>
<p>The main two reasons for this are:</p>
<ol type="i">
<li>You have another installation of OpenCV, either manually installed or through the package manager pip/mamba. This can easily be fixed by first uninstalling any opencv-python distributions from your package manager and then deleting the … directory or …. if they existing</li>
<li>You have built a <code>Debug</code> configuration. Currently (see issue) when building this configuration the .pyd is not copied into. This can be resolved by creating a .. and copyting the pyd.</li>
</ol></li>
<li><blockquote class="blockquote">
<p>ImportError: DLL load failed: The specified procedure could not be found.</p>
</blockquote>
<p>The directory of one or more of the required DLL’s has not been added with <a href="https://docs.python.org/3/library/os.html#os.add_dll_directory">os.add_dll_directory</a>. Whilst the automatic installation of the bindings should have added all the directories containing the dependant DLL’s to <code>config.py</code> its possible that one has been missed or you are using a less common configuration. In these cases you will have to</p>
<ol type="i">
<li>first track down which DLL’s are missing (<a href="nbs/ImportError_dll_load_failed_while_importing_cv2.html">see this guide for assistance</a>) and then</li>
<li>permanantly add the directory containing them to your installation by modifying the contents of <code>PATH_TO_PYTHON_DIST/Lib/site-packages/cv2/config.py</code>.</li>
</ol>
<p>e.g.&nbsp;If you built OpenCV against CUDA 12.1 and your own version of the FFMpeg libraries (<code>-DOPENCV_FFMPEG_USE_FIND_PACKAGE=ON</code>) instead of the provided <code>opencv_videoio_ffmpegxxx_64.dll</code> the contents of <code>config.py</code> should look like</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>BINARIES_PATHS <span class="op">=</span> [</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    os.path.join(<span class="st">'D:/build/opencv/install'</span>, <span class="st">'x64/vc17/bin'</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    os.path.join(os.getenv(<span class="st">'CUDA_PATH'</span>, <span class="st">'C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v12.1'</span>), <span class="st">'bin'</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    os.path.join(`D:<span class="op">/</span>ffmpeg<span class="op">/</span>bin`)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>] <span class="op">+</span> BINARIES_PATHS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="manually-installing-opencv-python-bindings" class="level2">
<h2 class="anchored" data-anchor-id="manually-installing-opencv-python-bindings">Manually installing OpenCV Python bindings</h2>
<p>If you have downloaded the pre-built binaries or are having issues with the automatic installation then you can manually install the python bindings following the steps below:</p>
<ol type="1">
<li><p>Copy</p>
<blockquote class="blockquote">
<p>PATH_TO_BUILD_DIR/lib/python3/cv2.cpxx-win_amd64.pyd</p>
</blockquote>
<p>to</p>
<blockquote class="blockquote">
<p>PATH_TO_PYTHON_DIST/Lib/site-packages/cv2.cpxx-win_amd64.pyd</p>
</blockquote></li>
<li><p>Determine the paths to the directories containing any dependant shared libraries (<a href="nbs/ImportError_dll_load_failed_while_importing_cv2.html">see here for assistance</a>).</p></li>
<li><p>Adding the locations from (2) by calling <code>os.add_dll_directory()</code> for each one before importing the OpenCV python module. e.g.&nbsp;If you have followed the guide exactly this will just be the directories containing the OpenCV and Nvidia shared libaries, which you would add as</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>os.add_dll_directory(<span class="st">'C:</span><span class="ch">\\</span><span class="st">Program Files</span><span class="ch">\\</span><span class="st">NVIDIA GPU Computing Toolkit</span><span class="ch">\\</span><span class="st">CUDA</span><span class="ch">\\</span><span class="st">vxx.x</span><span class="ch">\\</span><span class="st">bin'</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>os.add_dll_directory(<span class="st">'PATH_TO_BUILD_DIR/bin'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>before calling</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cv2 <span class="im">as</span> cv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
</section>
<section id="choosing-the-a-suitable-cuda-compute-capability" class="level1 page-columns page-full">
<h1>Choosing the a suitable CUDA compute capability</h1>
<p>. In this case you simply need to use the below before importing</p>
<p>From the feedback I have received it is most likely you have not added the location of either the OpenCV shared libraries (opencv_world450.dll and opencv_img_hash440.dll), the path to the CUDA binaries, or the path to tbb.dll if built with Intel TBB. This can be quickly checked by entering in the following</p>
<section id="tips" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="tips">Tips</h2>
<p>If you change your CMake arguments and you start getting build errors clean everything</p>
<p>Remove all optional CUDA modules. This is useful if you only want to use the CUDA backend for the DNN module and will significantly reduce compilation time and size of opencv_worldxxx.dll.</p>
<pre><code>-DBUILD_opencv_cudaarithm=OFF -DBUILD_opencv_cudabgsegm=OFF -DBUILD_opencv_cudafeatures2d=OFF -DBUILD_opencv_cudafilters=OFF -DBUILD_opencv_cudaimgproc=OFF -DBUILD_opencv_cudalegacy=OFF -DBUILD_opencv_cudaobjdetect=OFF -DBUILD_opencv_cudaoptflow=OFF -DBUILD_opencv_cudastereo=OFF -DBUILD_opencv_cudawarping=OFF -DBUILD_opencv_cudacodec=OFF</code></pre>
<pre><code>```{.python .code-overflow-wrap}
set "openCvSource=PATH_TO_OPENCV_SOURCE"
set "openCVExtraModules=PATH_TO_OPENCV_CONTRIB_MODULES"
set "openCvBuild=%openCvSource%\build"
set "buildType=Release"
set "generator=Visual Studio 16 2019"
```</code></pre>
<section id="troubleshooting" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="troubleshooting">Troubleshooting</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you don’t want to build python bindings then simply remove…</p>
</div>
</div>
<p>different version of python</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">I have seen lots of guides including instructions to download and use git to get the source files, however this is a completely unnecessary step. If you are a developer and you don’t already have git installed and configured then I would assume there is a good reason for this and I would not advise installing it just to build OpenCV.</span></div></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Before building you may want to ensure that your GPU has decoding support by refering to <a href="https://developer.nvidia.com/video-encode-decode-gpu-support-matrix#Decoder" rel="noopener noreferrer" target="_blank">Nvidia Video Decoder Support Matrix</a></p>
</div>
</div>
</div>
<p>where <code>PATH_TO_OPENCV_SOURCE</code> is the root of the OpenCV files you downloaded or cloned (the directory containing 3rdparty, apps, build, etc., <code>PATH_TO_OPENCV_CONTRIB_MODULES</code> is the path to the <strong>modules</strong> directory inside the <a href="https://github.com/opencv/opencv_contrib/tree/master/modules" target="_blank" rel="noopener noreferrer">opencv-contrib repo</a> (the directory containing cudaarithm, cudabgsegm, etc), <code>PATH_TO_BUILD_DIR</code> is the path to the directory where the build files should go and <code>PATH_TO_PYTHON_DIST</code> is the directory where miniconda was installed and <code>PYTHON_VERSION</code> is the concatination of the major and minor version of your python install, e.g.&nbsp;for Python 3.10.10 <code>PYTHON_VERSION=310</code>.</p>
<pre><code>This will build OpenCV with CUDA including and the corresponding tests and examples for verifcation. Additionally if the Nvidia Video Codec SDK or cuDNN are installed the corresponding modules will automatically be included

1. Set the location of the source files and build directory, by entering the text shown below, first setting `PATH_TO_OPENCV_SOURCE` to the root of the OpenCV files you downloaded or cloned (the directory containing 3rdparty, apps, build, etc.) and `PATH_TO_OPENCV_CONTRIB_MODULES` to the **modules** directory inside the &lt;a href="https://github.com/opencv/opencv_contrib/tree/master/modules" target="_blank" rel="noopener noreferrer"&gt;opencv-contrib repo&lt;/a&gt; (the directory containing cudaarithm, cudabgsegm, etc).

```{.python .code-overflow-wrap}
set "openCvSource=PATH_TO_OPENCV_SOURCE"
set "openCVExtraModules=PATH_TO_OPENCV_CONTRIB_MODULES"
set "openCvBuild=%openCvSource%\build"
set "buildType=Release"
set "generator=Visual Studio 16 2019"
```

```{.python .code-overflow-wrap}
set "openCvSource=PATH_TO_OPENCV_SOURCE"
set "openCVExtraModules=PATH_TO_OPENCV_CONTRIB_MODULES"
set "openCvBuild=%openCvSource%\build"
set "buildType=Release"
set "generator=Visual Studio 16 2019"
```</code></pre>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/cudawarped\.github\.io\/opencv-experiments\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>